<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{orders.0.ORDERID}}</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Roboto", sans-serif;
      }
      /* Define page size and margins */
      @page {
        size: A4;
        margin: 0mm 5mm;
      }

      /* Force page breaks after each section */
      .page-break {
        page-break-after: always;
      }

      /* Last page shouldn't have a page break */
      .page-break:last-child {
        page-break-after: auto;
      }

      /* Style for each page content using CSS Grid */
      .page-content {
        min-height: 292mm;
        display: grid;
        grid-template-rows: 1fr auto;
        grid-template-areas:
          "main"
          "footer";
        /* padding: 10px; */
      }

      .main-content {
        grid-area: main;
      }

      .page-footer {
        font-size: 10px;
        color: #666;
        text-align: center;
        border-top: 1px solid black;
        padding-top: 5px;
      }

      /* Rest of your existing styles remain the same */
      .box {
        display: flex;
        align-items: center;
      }
      .box-logo {
        width: 15%;
      }
      .box-logo > p {
        font-size: 24px;
        font-weight: bold;
        text-transform: uppercase;
      }
      .box-header-content {
        background-color: rgb(241, 233, 233);
        width: 85%;
        text-align: center;
        font-size: 16px;
        font-weight: bold;
      }
      .title-box {
        border: 1px solid black;
        text-align: center;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
      }

      th,
      td {
        border: 1px solid black;
        padding: 4px 8px;
        font-size: 10px;
      }

      th {
        background-color: #f0f0f0;
        font-weight: bold;
      }

      /* Print optimizations */
      @media print {
        .no-print {
          display: none;
        }
        .page-break {
          page-break-after: always;
        }
      }
    </style>
  </head>
  <body>
    {{#each orders}} {{#if hasPageBreak}}
    <div class="page-break"></div>
    {{/if}}
    <div class="page-content">
      <div class="main-content">
        <div class="box">
          <div class="box-logo">
            <p>Erpac</p>
          </div>
          <div class="box-header-content">
            <p>
              Plot # 2083-2085, Binodpur, Maijdee, Sadar, Noakhali-3800,
              Bangladesh
            </p>
          </div>
        </div>

        <div
          class="title-box"
          style="
            display: flex;
            justify-content: space-between;
            text-align: right;
          "
        >
          <p style="font-weight: bold; font-size: 12px; width: 50%">Job Bag</p>
          <p style="font-size: 12px; width: 50%; padding-right: 9px">
            Total Job Bag: {{../summary.totalJob}}
          </p>
        </div>

        <table>
          <tr style="line-height: 1px; padding: 0px 8px !important">
            <td
              style="
                background: rgb(162, 245, 162);
                color: black;
                text-align: center;
                font-weight: bold;
                font-size: 14px;
              "
            >
              Regular
            </td>
            <td style="font-weight: bold">
              Job Bag: {{this.JOBID}} - {{this.JOB_NO}}
            </td>
            <td style="font-weight: bold">Order No: {{this.ORDERID}}</td>
            <td style="font-weight: bold">
              <p>Buyer Ref: {{this.BUYER_REF}}</p>
              <p>Vendor Ref: {{this.VENDOR_REF}}</p>
            </td>
            <td style="font-weight: bold">
              <div style="display: flex; justify-content: center">
                <img
                  src="https://res.cloudinary.com/dgbbrqqiq/image/upload/v1764167965/TourmalineEnterprises-238548-QR-vs-Barcodes-Blogbanner1_tnfdyl.jpg"
                  alt="IMAGE"
                  style="height: 40px"
                />
              </div>
            </td>
          </tr>
          <tr style="font-weight: bold">
            <td colspan="2">Vendor: {{this.VENDOR}}</td>
            <td>Buyer: {{this.BUYER}}</td>
            <td>Product Line: {{this.LINE}}</td>
            <td>Season: {{this.SEASON}}</td>
          </tr>
          <tr style="font-weight: 500">
            <td colspan="2">Product Desc: {{this.DESC}}</td>
            <td>
              DIMENSION: {{this.WIDTH}} x {{this.LENGTH}} {{#if this.HEIGHT}} x
              {{this.HEIGHT}} {{/if}} {{this.UNIT}}
            </td>
            <td>Product Id: {{this.PRODUCT_ID}}</td>
            <td>Order Date: {{this.ORDER_DATE}}</td>
          </tr>
          <tr style="font-weight: 500">
            <td>RM:</td>
            <td>Booking Qty: {{this.totalQuantity}}</td>
            <td>Base Qty: {{this.baseQuantity}} Pcs</td>
            <td style="font-weight: bold">Category: {{this.CATEGORY}}</td>
            <td>Request Date: {{this.REQ_DATE}}</td>
          </tr>
          <tr style="font-weight: 500">
            <td colspan="2">CS: {{this.CS}}</td>
            <td colspan="2" style="font-weight: bold">
              {{#if this.MODEL}}Model: {{this.MODEL}},{{/if}} {{#if
              this.ITEM}}ITEM/ART/PACK: {{this.ITEM}},{{/if}} Style/Iman/CC:
              {{this.CC}}
            </td>
            <td></td>
          </tr>
        </table>

        <div
          style="
            display: flex;
            flex-wrap: wrap;
            margin-top: 10px;
            justify-content: space-between;
            padding-bottom: 3px;
            border-bottom: 1px solid black;
          "
        >
          {{#each processArray}}
          <div style="width: 49%">
            <table style="margin-top: 4px">
              <tr>
                <td style="width: 40%">{{this.title}}</td>
                <td style="width: 60%">{{this.value}} {{this.item}}</td>
              </tr>
            </table>
          </div>
          {{/each}}
        </div>

        {{#each processes}}
        <div>
          <p style="font-size: 10px">Process : {{this.title}}</p>
          {{#if (eq this.information "Full")}}
          <table>
            <tr style="background-color: aquamarine">
              <td>Model</td>
              <td>Colour</td>
              <td>Size/Age</td>
              <td>EAN</td>
              <td>Total Part</td>
              <td>Order Qty</td>
              <td>Part No</td>
              <td>Base Qty</td>
              <td>Production Qty</td>
              <td>Full Date</td>
              <td>Machine No</td>
              <td>Operator</td>
            </tr>
            {{#each ../orderDetails}}
            <tr>
              <td>{{this.model}}</td>
              <td>{{this.gmts_color}}</td>
              <td style="text-align: center">{{this.size_age}}</td>
              <td>{{this.ean_number}}</td>
              <td style="text-align: center">{{this.page_part}}</td>
              <td style="text-align: center">{{this.order_qty}}</td>
              <td style="padding: 0px">
                {{#if (isIntAndGreaterThan this.page_part 0)}}
                <table style="margin-top: 0px">
                  {{#times this.page_part}}
                  <tr>
                    {{#if @last}}
                    <td
                      style="
                        border: none;
                        border-bottom: 0px solid black;
                        text-align: center;
                      "
                    >
                      {{@number}}
                    </td>
                    {{else}}
                    <td
                      style="
                        border: none;
                        border-bottom: 1px solid black;
                        text-align: center;
                      "
                    >
                      {{@number}}
                    </td>
                    {{/if}}
                  </tr>
                  {{/times}}
                </table>
                {{else}}
                <table style="margin-top: 0px">
                  <tr>
                    <td
                      style="
                        border: none;
                        border-bottom: 1px solid black;
                        text-align: center;
                      "
                    >
                      0.5
                    </td>
                  </tr>
                  {{#times this.page_part}}
                  <tr>
                    {{#if @last}}
                    <td
                      style="
                        border: none;
                        border-bottom: 0px solid black;
                        text-align: center;
                      "
                    >
                      {{@number}}
                    </td>
                    {{else}}
                    <td
                      style="
                        border: none;
                        border-bottom: 1px solid black;
                        text-align: center;
                      "
                    >
                      {{@number}}
                    </td>
                    {{/if}}
                  </tr>
                  {{/times}}
                </table>
                {{/if}}
              </td>
              <td style="padding: 0px">
                {{#if (isIntAndGreaterThan this.page_part 0)}}
                <table style="margin-top: 0px">
                  {{#times this.page_part}}
                  <tr>
                    {{#if @last}}
                    <td
                      style="
                        border: none;
                        border-bottom: 0px solid black;
                        text-align: center;
                      "
                    >
                      {{this.order_qty}}
                    </td>
                    {{else}}
                    <td
                      style="
                        border: none;
                        border-bottom: 1px solid black;
                        text-align: center;
                      "
                    >
                      {{this.order_qty}}
                    </td>
                    {{/if}}
                  </tr>
                  {{/times}}
                </table>
                {{else}}
                <table style="margin-top: 0px">
                  <tr>
                    <td
                      style="
                        border: none;
                        border-bottom: 1px solid black;
                        text-align: center;
                      "
                    >
                      {{this.order_qty}}
                    </td>
                  </tr>
                  {{#times this.page_part}}
                  <tr>
                    {{#if @last}}
                    <td
                      style="
                        border: none;
                        border-bottom: 0px solid black;
                        text-align: center;
                      "
                    >
                      {{this.order_qty}}
                    </td>
                    {{else}}
                    <td
                      style="
                        border: none;
                        border-bottom: 1px solid black;
                        text-align: center;
                      "
                    >
                      {{this.order_qty}}
                    </td>
                    {{/if}}
                  </tr>
                  {{/times}}
                </table>
                {{/if}}
              </td>
              <td style="padding: 0px">
                {{#if (isIntAndGreaterThan this.page_part 0)}}
                <table style="margin-top: 0px">
                  {{#times this.page_part}}
                  <tr>
                    {{#if @last}}
                    <td style="border: none; border-bottom: 0px solid black">
                      Qty:
                    </td>
                    {{else}}
                    <td style="border: none; border-bottom: 1px solid black">
                      Qty:
                    </td>
                    {{/if}}
                  </tr>
                  {{/times}}
                </table>
                {{else}}
                <table style="margin-top: 0px">
                  <tr>
                    <td style="border: none; border-bottom: 1px solid black">
                      Qty:
                    </td>
                  </tr>
                  {{#times this.page_part}}
                  <tr>
                    {{#if @last}}
                    <td style="border: none; border-bottom: 0px solid black">
                      Qty:
                    </td>
                    {{else}}
                    <td style="border: none; border-bottom: 1px solid black">
                      Qty:
                    </td>
                    {{/if}}
                  </tr>
                  {{/times}}
                </table>
                {{/if}}
              </td>
              <td style="padding: 0px">
                {{#if (isIntAndGreaterThan this.page_part 0)}}
                <table style="margin-top: 0px">
                  {{#times this.page_part}}
                  <tr>
                    {{#if @last}}
                    <td style="border: none; border-bottom: 0px solid black">
                      Qty:
                    </td>
                    {{else}}
                    <td style="border: none; border-bottom: 1px solid black">
                      Qty:
                    </td>
                    {{/if}}
                  </tr>
                  {{/times}}
                </table>
                {{else}}
                <table style="margin-top: 0px">
                  <tr>
                    <td style="border: none; border-bottom: 1px solid black">
                      Qty:
                    </td>
                  </tr>
                  {{#times this.page_part}}
                  <tr>
                    {{#if @last}}
                    <td style="border: none; border-bottom: 0px solid black">
                      Qty:
                    </td>
                    {{else}}
                    <td style="border: none; border-bottom: 1px solid black">
                      Qty:
                    </td>
                    {{/if}}
                  </tr>
                  {{/times}}
                </table>
                {{/if}}
              </td>
              <td style="padding: 0px">
                {{#if (isIntAndGreaterThan this.page_part 0)}}
                <table style="margin-top: 0px">
                  {{#times this.page_part}}
                  <tr>
                    {{#if @last}}
                    <td style="border: none; border-bottom: 0px solid black">
                      Qty:
                    </td>
                    {{else}}
                    <td style="border: none; border-bottom: 1px solid black">
                      Qty:
                    </td>
                    {{/if}}
                  </tr>
                  {{/times}}
                </table>
                {{else}}
                <table style="margin-top: 0px">
                  <tr>
                    <td style="border: none; border-bottom: 1px solid black">
                      Qty:
                    </td>
                  </tr>
                  {{#times this.page_part}}
                  <tr>
                    {{#if @last}}
                    <td style="border: none; border-bottom: 0px solid black">
                      Qty:
                    </td>
                    {{else}}
                    <td style="border: none; border-bottom: 1px solid black">
                      Qty:
                    </td>
                    {{/if}}
                  </tr>
                  {{/times}}
                </table>
                {{/if}}
              </td>
              <td style="padding: 0px">
                {{#if (isIntAndGreaterThan this.page_part 0)}}
                <table style="margin-top: 0px">
                  {{#times this.page_part}}
                  <tr>
                    {{#if @last}}
                    <td
                      style="border: none; border-bottom: 0px solid black"
                    ></td>
                    {{else}}
                    <td
                      style="border: none; border-bottom: 1px solid black"
                    ></td>
                    {{/if}}
                  </tr>
                  {{/times}}
                </table>
                {{else}}
                <table style="margin-top: 0px">
                  <tr>
                    <td
                      style="border: none; border-bottom: 1px solid black"
                    ></td>
                  </tr>
                  {{#times this.page_part}}
                  <tr>
                    {{#if @last}}
                    <td
                      style="border: none; border-bottom: 0px solid black"
                    ></td>
                    {{else}}
                    <td
                      style="border: none; border-bottom: 1px solid black"
                    ></td>
                    {{/if}}
                  </tr>
                  {{/times}}
                </table>
                {{/if}}
              </td>
            </tr>
            {{/each}}
          </table>
          {{/if}}
        </div>
        {{/each}}
      </div>

      <!-- Footer at the bottom of each page -->
      <div class="page-footer">
        Generated on {{../summary.generatedDate}} | {{../summary.JOBPRINT}}
      </div>
    </div>
    {{/each}}
  </body>
</html>
